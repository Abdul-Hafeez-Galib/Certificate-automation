"use strict";(self.webpackChunkcertificate_automation=self.webpackChunkcertificate_automation||[]).push([[592],{3669:(Z,_,o)=>{o.d(_,{w:()=>u});var e=o(2238),n=o(7716);let u=(()=>{class t{constructor(s){this.data=s}ngOnInit(){}}return t.\u0275fac=function(s){return new(s||t)(n.Y36(e.WI))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-alert"]],decls:4,vars:1,consts:[[1,"flex","flex-row","justify-around","items-center"],[1,"font-mono","font-semibold","text-xl"],["src","assets/success.png","alt","",1,"w-20","h-20"]],template:function(s,p){1&s&&(n.TgZ(0,"div",0),n.TgZ(1,"span",1),n._uU(2),n.qZA(),n._UZ(3,"img",2),n.qZA()),2&s&&(n.xp6(2),n.Oqu(p.data.message?p.data.message:p.data))},styles:[""]}),t})()},9241:(Z,_,o)=>{o.d(_,{C:()=>v});var e=o(3679),n=o(2238),u=o(3669),t=o(7716),d=o(3992),s=o(8295),p=o(9983),T=o(8583),I=o(1095);function b(r,m){if(1&r&&(t.TgZ(0,"div",18),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.qZA()),2&r){const a=m.$implicit;t.xp6(2),t.Oqu(a)}}function D(r,m){if(1&r){const a=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(a),t.oxw().forward()}),t._uU(1,"Forward"),t.qZA()}}function N(r,m){if(1&r){const a=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(a),t.oxw().verifyReturn()}),t._uU(1,"Verify and Return"),t.qZA()}}let v=(()=>{class r{constructor(a,i,l,c){this.fb=a,this.data=i,this.apiService=l,this.dialog=c,this.certificates=[]}ngOnInit(){var a,i,l,c,g,f,h,w;this.applicationForm=this.fb.group({name:new e.NI("",e.kI.required),admissionNo:new e.NI("",e.kI.required),regNo:new e.NI("",e.kI.required),program:new e.NI("",e.kI.required),semester:new e.NI("",e.kI.required),scholarship:new e.NI("",e.kI.required),otherScholarship:new e.NI(""),bonaFide:new e.NI(!1),feeStructure:new e.NI(!1),gpaToPercentage:new e.NI(!1),promotion:new e.NI(!1),mediumOfInstruction:new e.NI(!1),otherCertificates:new e.NI(""),specificFormat:new e.NI(!1),photoInFormat:new e.NI(""),phoneNumber:new e.NI("",e.kI.required),email:new e.NI("",e.kI.required),signature:new e.NI("",e.kI.required)}),this.data&&(null===(a=this.applicationForm.get("name"))||void 0===a||a.setValue(this.data.name),null===(i=this.applicationForm.get("admissionNo"))||void 0===i||i.setValue(this.data.admissionNo),null===(l=this.applicationForm.get("regNo"))||void 0===l||l.setValue(this.data.regNo),null===(c=this.applicationForm.get("program"))||void 0===c||c.setValue(this.data.program),null===(g=this.applicationForm.get("semester"))||void 0===g||g.setValue(this.data.semester),null===(f=this.applicationForm.get("scholarship"))||void 0===f||f.setValue(this.data.scholarship),null===(h=this.applicationForm.get("phoneNumber"))||void 0===h||h.setValue(this.data.phoneNumber),null===(w=this.applicationForm.get("email"))||void 0===w||w.setValue(this.data.email),this.certificates=this.data.certificateType,console.log(this.certificates));const A=localStorage.getItem("userToken");console.log(A),A&&(this.userData=A.split(".")[1],this.userData=window.atob(this.userData),this.userData=JSON.parse(this.userData)),this.userData=this.userData.user,console.log(this.userData),this.userId=this.userData._id,this.userType=this.userData.userType}forward(){if("dean"!=this.userType){let a;a=this.userData.hod?"HOD":this.userData.dean?"Dean":"Principal",this.apiService.forward(this.data._id,{to:this.userData.hod||this.userData.dean||this.userData.principal,status:`Under review by ${a}`}).subscribe(l=>{console.log(l),this.dialog.open(u.w,{width:"250px",data:{title:"Alert",message:"Success!"}}),setTimeout(()=>{this.dialog.closeAll()},500),window.location.reload()})}}cancel(){this.apiService.deleteCertificateRequest(this.data._id).subscribe(a=>{console.log(a),this.dialog.open(u.w,{width:"250px",data:{title:"Alert",message:"Deleted!"}}),setTimeout(()=>{this.dialog.closeAll()},500),window.location.reload()})}verifyReturn(){"dean"==this.userType&&this.apiService.forward(this.data._id,{to:this.data.from,status:"Completed"}).subscribe(i=>{console.log(i),this.dialog.open(u.w,{width:"250px",data:{title:"Alert",message:"Success!"}}),setTimeout(()=>{this.dialog.closeAll()},500),window.location.reload()})}}return r.\u0275fac=function(a){return new(a||r)(t.Y36(e.qu),t.Y36(n.WI),t.Y36(d.s),t.Y36(n.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-view-application-form-dialog"]],decls:39,vars:4,consts:[[1,"main"],["action","",1,"flex","flex-col","items-center",3,"formGroup"],["appearance","outline",1,"mt-5"],["matInput","","formControlName","name"],["appearance","outline"],["matInput","","type","number","formControlName","admissionNo"],["matInput","","formControlName","regNo"],["matInput","","formControlName","program"],["matInput","","formControlName","semester"],[1,"details","px-6","mt-5","mb-5"],[1,"details-head","w-max","flex","flex-col","justify-start"],["class","py-8 grid grid-cols-2 gap-4 ",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","phoneNumber"],["matInput","","formControlName","email"],[1,"flex","flex-row","justify-between","w-full"],["mat-button","","class","bg-green-600 btn text-white w-32",3,"click",4,"ngIf"],["mat-button","",1,"bg-red-500","btn","text-white","w-36",3,"click"],["mat-button","","class","bg-green-600 btn text-white w-36",3,"click",4,"ngIf"],[1,"py-8","grid","grid-cols-2","gap-4"],["mat-button","",1,"bg-green-600","btn","text-white","w-32",3,"click"],["mat-button","",1,"bg-green-600","btn","text-white","w-36",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"main",0),t.TgZ(1,"form",1),t.TgZ(2,"mat-form-field",2),t.TgZ(3,"mat-label"),t._uU(4,"Name of the student"),t.qZA(),t._UZ(5,"input",3),t.qZA(),t.TgZ(6,"mat-form-field",4),t.TgZ(7,"mat-label"),t._uU(8,"Admission No."),t.qZA(),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"mat-form-field",4),t.TgZ(11,"mat-label"),t._uU(12,"KTU Registration No."),t.qZA(),t._UZ(13,"input",6),t.qZA(),t.TgZ(14,"mat-form-field",4),t.TgZ(15,"mat-label"),t._uU(16,"Programme"),t.qZA(),t._UZ(17,"input",7),t.qZA(),t.TgZ(18,"mat-form-field",4),t.TgZ(19,"mat-label"),t._uU(20,"Semester"),t.qZA(),t._UZ(21,"input",8),t.qZA(),t.TgZ(22,"div",9),t.TgZ(23,"span",10),t._uU(24,"Certificates Required"),t.qZA(),t.YNc(25,b,3,1,"div",11),t.qZA(),t.TgZ(26,"mat-form-field",4),t.TgZ(27,"mat-label"),t._uU(28,"Phone No."),t.qZA(),t._UZ(29,"input",12),t.qZA(),t.TgZ(30,"mat-form-field",4),t.TgZ(31,"mat-label"),t._uU(32,"Email "),t.qZA(),t._UZ(33,"input",13),t.qZA(),t.TgZ(34,"div",14),t.YNc(35,D,2,0,"button",15),t.TgZ(36,"button",16),t.NdJ("click",function(){return i.cancel()}),t._uU(37,"Cancel Request"),t.qZA(),t.YNc(38,N,2,0,"button",17),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Q6J("formGroup",i.applicationForm),t.xp6(24),t.Q6J("ngForOf",i.certificates),t.xp6(10),t.Q6J("ngIf","dean"!=i.userType),t.xp6(3),t.Q6J("ngIf","dean"==i.userType))},directives:[e._Y,e.JL,e.sg,s.KE,s.hX,p.Nt,e.Fj,e.JJ,e.u,e.wV,T.sg,T.O5,I.lW],styles:['.main[_ngcontent-%COMP%]{padding:5%;max-height:450px;overflow-y:auto}.details-head[_ngcontent-%COMP%]{position:relative;top:-10px;left:0%;font-family:"Allerta";font-style:normal;font-weight:400;font-size:16px;line-height:20px;display:flex;align-items:center;text-align:center;letter-spacing:.1em;text-transform:capitalize;background:#F5F5F5;color:#5f5f5f}.details[_ngcontent-%COMP%]{width:300px;height:max-content;background:#F5F5F5;border:1px solid #89ABE3;border-radius:20px}  .mat-form-field-flex{width:300px!important}']}),r})()}}]);